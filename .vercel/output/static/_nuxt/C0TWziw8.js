import{d as j,g as y,b as B,o as a,w as x,C as n,M as e,i as r,F as h,E as p,f as o,j as f,J as d,D as b,dv as N,_ as R,I as v,Q as L}from"./CTkq0g8j.js";import{_ as V}from"./D0TfP2D2.js";import{_ as F}from"./Djkiha65.js";import{_ as T}from"./DsTXvJJt.js";import{_ as z}from"./DlAUqK2U.js";const E={class:"flex items-center justify-between"},H={key:0,class:"space-y-4"},J={class:"flex items-center justify-between"},M={class:"space-y-3"},O={key:1,class:"space-y-4"},P={class:"grid grid-cols-2 gap-4 pb-4 border-b border-border"},Q={class:"text-2xl font-bold text-highlighted"},X={class:"flex items-center justify-between text-sm"},Y={class:"flex items-center gap-2"},q={class:"font-medium"},G={class:"space-y-3"},K={key:0,class:"text-center py-8"},W={key:1,class:"space-y-2 max-h-64 overflow-y-auto"},Z={class:"flex-1 min-w-0"},ee={class:"flex items-center gap-2 mb-1"},te={class:"text-xs font-medium text-highlighted"},se={class:"text-xs text-muted mb-1"},ie={class:"flex items-center justify-between"},ae={class:"text-xs font-medium text-highlighted"},ne={key:0,class:"text-xs text-muted"},re={key:0,class:"pt-4 border-t border-border"},oe={class:"space-y-1"},le={key:1,class:"pt-3 border-t border-border"},de={key:2,class:"flex items-center justify-center py-12"},ce={class:"text-center"},me=j({__name:"AnomalyAlerts",props:{data:{},loading:{type:Boolean}},setup(w){const _=w,k=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(i),A=i=>{switch(i){case"high":return"red";case"medium":return"amber";case"low":return"blue";default:return"neutral"}},S=i=>{switch(i){case"high":return"i-lucide-alert-triangle";case"medium":return"i-lucide-alert-circle";case"low":return"i-lucide-info";default:return"i-lucide-help-circle"}},C=i=>{switch(i){case"daily_spending":return"i-lucide-calendar";case"category_spending":return"i-lucide-tag";case"vendor_spending":return"i-lucide-building-2";case"timing_anomaly":return"i-lucide-clock";default:return"i-lucide-search"}},D=i=>{switch(i){case"daily_spending":return"Daily Spending";case"category_spending":return"Category Spending";case"vendor_spending":return"Vendor Spending";case"timing_anomaly":return"Timing Anomaly";default:return"Unknown"}},g=y(()=>_.data?.anomalies?_.data.anomalies.slice(0,5):[]),l=y(()=>{if(!_.data?.summary)return null;const{totalTransactions:i,anomaliesDetected:t,highSeverityAnomalies:c,anomalyRate:u}=_.data.summary;return{totalTransactions:i,anomaliesDetected:t,highSeverityAnomalies:c,anomalyRate:u,riskLevel:c>5?"high":c>2?"medium":"low"}});return(i,t)=>{const c=L,u=V,I=N,m=R,U=F,$=T;return a(),B($,{class:"h-full"},{header:x(()=>[e("div",E,[t[0]||(t[0]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Anomaly Detection"),e("p",{class:"text-sm text-muted"},"AI-powered expense analysis")],-1)),r(c,{icon:"i-lucide-external-link",color:"neutral",variant:"ghost",size:"sm",to:"/anomalies"})])]),default:x(()=>[i.loading?(a(),n("div",H,[e("div",J,[r(u,{class:"h-4 w-24"}),r(u,{class:"h-6 w-16"})]),e("div",M,[(a(),n(h,null,p(3,s=>r(u,{class:"h-16 w-full",key:s})),64))])])):o(l)?(a(),n("div",O,[e("div",P,[e("div",null,[e("div",Q,d(o(l).anomaliesDetected),1),t[1]||(t[1]=e("div",{class:"text-xs text-muted"},"Anomalies Detected",-1))]),e("div",null,[e("div",{class:b(["text-2xl font-bold",{"text-red-500":o(l).riskLevel==="high","text-amber-500":o(l).riskLevel==="medium","text-emerald-500":o(l).riskLevel==="low"}])},d(o(l).highSeverityAnomalies),3),t[2]||(t[2]=e("div",{class:"text-xs text-muted"},"High Severity",-1))])]),e("div",X,[t[3]||(t[3]=e("span",{class:"text-muted"},"Anomaly Rate",-1)),e("div",Y,[e("span",q,d(o(l).anomalyRate.toFixed(1))+"%",1),r(I,{value:o(l).anomalyRate,max:10,color:o(l).anomalyRate>5?"red":o(l).anomalyRate>2?"amber":"emerald",class:"w-16"},null,8,["value","color"])])]),e("div",G,[t[6]||(t[6]=e("h4",{class:"text-sm font-medium text-highlighted"},"Recent Anomalies",-1)),o(g).length===0?(a(),n("div",K,[r(m,{name:"i-lucide-shield-check",class:"h-12 w-12 text-emerald-500 mx-auto mb-2"}),t[4]||(t[4]=e("p",{class:"text-sm text-muted"},"No anomalies detected",-1)),t[5]||(t[5]=e("p",{class:"text-xs text-muted/70"},"Your expenses are within normal patterns",-1))])):(a(),n("div",W,[(a(!0),n(h,null,p(o(g),s=>(a(),n("div",{key:`${s.type}-${s.amount}`,class:"flex items-start gap-3 p-3 rounded-lg border border-border hover:bg-muted/30 transition-colors"},[e("div",{class:b(["flex-shrink-0 p-1.5 rounded-full",{"bg-red-100 dark:bg-red-900/20":s.severity==="high","bg-amber-100 dark:bg-amber-900/20":s.severity==="medium","bg-blue-100 dark:bg-blue-900/20":s.severity==="low"}])},[r(m,{name:S(s.severity),class:b([{"text-red-600 dark:text-red-400":s.severity==="high","text-amber-600 dark:text-amber-400":s.severity==="medium","text-blue-600 dark:text-blue-400":s.severity==="low"},"h-3 w-3"])},null,8,["name","class"])],2),e("div",Z,[e("div",ee,[r(m,{name:C(s.type),class:"h-3 w-3 text-muted"},null,8,["name"]),e("span",te,d(D(s.type)),1),r(U,{color:A(s.severity),variant:"subtle",size:"xs"},{default:x(()=>[v(d(s.severity),1)]),_:2},1032,["color"])]),e("p",se,d(s.message),1),e("div",ie,[e("span",ae,d(k(s.amount)),1),s.transaction?(a(),n("div",ne,d(s.transaction.date),1)):f("",!0)])])]))),128))]))]),i.data?.insights&&i.data.insights.length>0?(a(),n("div",re,[t[7]||(t[7]=e("h4",{class:"text-sm font-medium text-highlighted mb-2"},"AI Insights",-1)),e("div",oe,[(a(!0),n(h,null,p(i.data.insights,s=>(a(),n("p",{key:s,class:"text-xs text-muted flex items-start gap-2"},[r(m,{name:"i-lucide-lightbulb",class:"h-3 w-3 text-amber-500 mt-0.5 flex-shrink-0"}),v(" "+d(s),1)]))),128))])])):f("",!0),o(g).length>0?(a(),n("div",le,[r(c,{to:"/anomalies",color:"neutral",variant:"subtle",size:"sm",block:""},{trailing:x(()=>[r(m,{name:"i-lucide-arrow-right",class:"h-4 w-4"})]),default:x(()=>[t[8]||(t[8]=v(" View All Anomalies ",-1))]),_:1,__:[8]})])):f("",!0)])):(a(),n("div",de,[e("div",ce,[r(m,{name:"i-lucide-search",class:"h-12 w-12 text-muted/50 mx-auto mb-4"}),t[9]||(t[9]=e("p",{class:"text-muted"},"No anomaly data available",-1)),t[10]||(t[10]=e("p",{class:"text-sm text-muted/70"},"Connect to Xero to enable AI-powered anomaly detection",-1))])]))]),_:1})}}}),pe=Object.assign(z(me,[["__scopeId","data-v-7ffa87c2"]]),{__name:"DashboardAnomalyAlerts"});export{pe as default};
