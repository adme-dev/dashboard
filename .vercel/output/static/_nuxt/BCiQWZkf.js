import{_ as Z,a as j}from"./BEHCJB9p.js";import{_ as z}from"./D0TfP2D2.js";import{_ as G}from"./Djkiha65.js";import{_ as J}from"./C5guC-ku.js";import{_ as W}from"./BZ9R8plv.js";import{d as Y,S as T,g as _,b as m,w as p,T as $,Z as q,o as r,i as u,C as a,j as C,f as s,F as P,E as M,M as t,J as n,I as L}from"./CTkq0g8j.js";import"./DRjXbHxH.js";const K={key:0,class:"space-y-3"},O={key:1,class:"text-sm text-negative"},Q={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},tt={class:"text-xl font-semibold"},et={class:"text-xs text-muted"},st={class:"text-xl font-semibold"},ot={class:"flex items-baseline gap-2"},rt={class:"text-xl font-semibold"},nt={class:"text-xs text-muted"},it={class:"flex items-baseline gap-2"},at={class:"text-xl font-semibold"},lt={key:0,class:"space-y-3"},dt={key:1,class:"text-sm text-negative"},pt={key:2},ut={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},mt={class:"text-xl font-semibold"},ct={class:"text-xl font-semibold"},xt={class:"text-xl font-semibold"},ft={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},_t={class:"rounded-lg border border-border/60 p-4"},gt={class:"text-lg font-semibold"},bt={class:"rounded-lg border border-border/60 p-4"},vt={class:"text-lg font-semibold"},yt={class:"rounded-lg border border-border/60 p-4"},ht={class:"text-lg font-semibold"},St=Y({__name:"index",async setup(kt){let l,g;const{data:i,pending:w,error:N}=([l,g]=T(()=>$("/api/xero/reports/pnl","$6HxCvb34Yu")),l=await l,g(),l),{data:c,pending:U,error:D}=([l,g]=T(()=>$("/api/xero/reports/balance-sheet","$wfZ-X26uM2")),l=await l,g(),l),E=_(()=>i.value??null),x=_(()=>{const o=E.value?.periods??[];return o[o.length-1]}),f=_(()=>{const o=E.value?.periods??[];return o.length>1?o[o.length-2]:void 0}),b=_(()=>!x.value||!f.value?null:x.value.netProfit-f.value.netProfit),v=_(()=>!x.value||!f.value?null:(x.value.profitMargin-f.value.profitMargin)*100);function d(o){return typeof o!="number"||Number.isNaN(o)?"-":o.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}function B(o){return typeof o!="number"||Number.isNaN(o)?"-":`${o.toFixed(1)}%`}function F(o){return o===null?"neutral":o>0?"success":o<0?"error":"neutral"}function V(o){return typeof o!="number"||Number.isNaN(o)?"-":`${o.toFixed(2)}x`}return(o,e)=>{const R=j,y=z,S=G,h=J,A=q("ProfitTrendChart"),H=q("ExpenseBreakdownChart"),I=W,X=Z;return r(),m(X,null,{default:p(()=>[u(R,{title:"Financial Reports",description:"Visualize profit trends and balance sheet health"}),u(I,{class:"gap-4 sm:gap-6"},{default:p(()=>[u(h,{title:"Profit & Loss Snapshot",variant:"subtle"},{default:p(()=>[s(w)?(r(),a("div",K,[u(y,{class:"h-4 w-32"}),(r(),a(P,null,M(3,k=>u(y,{key:k,class:"h-4 w-full"})),64))])):s(N)?(r(),a("div",O," Failed to load Profit & Loss data. ")):(r(),a("div",Q,[t("div",null,[e[0]||(e[0]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Revenue ",-1)),t("p",tt,n(d(s(i)?.revenueTotal)),1),t("p",et,n(s(x)?.label||"Current period"),1)]),t("div",null,[e[1]||(e[1]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Expenses ",-1)),t("p",st,n(d(s(i)?.expensesTotal)),1),e[2]||(e[2]=t("p",{class:"text-xs text-muted"}," Including operating costs & overhead ",-1))]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Net Profit ",-1)),t("div",ot,[t("p",rt,n(d(s(i)?.netProfit)),1),s(b)!==null?(r(),m(S,{key:0,color:F(s(b))},{default:p(()=>[L(n(s(b)>0?"+":"")+n(d(s(b)))+" vs previous ",1)]),_:1},8,["color"])):C("",!0)]),t("p",nt,n(s(f)?.label||"No prior period"),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Profit Margin ",-1)),t("div",it,[t("p",at,n(B((s(i)?.profitMargin||0)*100)),1),s(v)!==null?(r(),m(S,{key:0,color:F(s(v))},{default:p(()=>[L(n(s(v)>0?"+":"")+n(s(v).toFixed(1))+" pts ",1)]),_:1},8,["color"])):C("",!0)]),e[5]||(e[5]=t("p",{class:"text-xs text-muted"}," Change period-over-period ",-1))])]))]),_:1}),!s(w)&&!s(N)?(r(),a(P,{key:0},[(s(i)?.periods?.length||0)>1?(r(),m(A,{key:0,periods:s(i)?.periods||[]},null,8,["periods"])):(r(),m(h,{key:1,variant:"subtle"},{default:p(()=>e[6]||(e[6]=[t("p",{class:"text-sm text-muted"}," More than one reporting period is needed to show the profit trend. ",-1)])),_:1,__:[6]})),(s(i)?.expensesByCategory?.length||0)>0?(r(),m(H,{key:2,items:s(i)?.expensesByCategory||[]},null,8,["items"])):(r(),m(h,{key:3,variant:"subtle"},{default:p(()=>e[7]||(e[7]=[t("p",{class:"text-sm text-muted"}," Expense categories will appear once Xero returns a detailed breakdown. ",-1)])),_:1,__:[7]}))],64)):C("",!0),u(h,{title:"Balance Sheet",variant:"subtle",class:"md:col-span-2"},{default:p(()=>[s(U)?(r(),a("div",lt,[u(y,{class:"h-4 w-32"}),(r(),a(P,null,M(3,k=>u(y,{key:k,class:"h-4 w-full"})),64))])):s(D)?(r(),a("div",dt," Failed to load Balance Sheet data. ")):(r(),a("div",pt,[t("div",ut,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Total Assets ",-1)),t("p",mt,n(d(s(c)?.totalAssets)),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Total Liabilities ",-1)),t("p",ct,n(d(s(c)?.totalLiabilities)),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Total Equity ",-1)),t("p",xt,n(d(s(c)?.totalEquity)),1)])]),t("div",ft,[t("div",_t,[e[11]||(e[11]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Working Capital ",-1)),t("p",gt,n(d(s(c)?.workingCapital)),1),e[12]||(e[12]=t("p",{class:"text-xs text-muted"}," Liquidity to cover short-term obligations ",-1))]),t("div",bt,[e[13]||(e[13]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Debt-to-Equity ",-1)),t("p",vt,n(V(s(c)?.debtToEquity)),1),e[14]||(e[14]=t("p",{class:"text-xs text-muted"}," Leverage compared to shareholder equity ",-1))]),t("div",yt,[e[15]||(e[15]=t("p",{class:"text-xs text-muted uppercase mb-1"}," Equity Ratio ",-1)),t("p",ht,n(B((s(c)?.equityRatio||0)*100)),1),e[16]||(e[16]=t("p",{class:"text-xs text-muted"}," Share of assets financed by equity ",-1))])])]))]),_:1})]),_:1})]),_:1})}}});export{St as default};
