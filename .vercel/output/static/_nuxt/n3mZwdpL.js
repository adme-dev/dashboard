import{d as w,g as f,b as C,o as u,w as h,C as g,f as o,M as e,i as U,_ as F,F as y,E as b,n as m,J as n}from"./CTkq0g8j.js";import{_ as $}from"./DsTXvJJt.js";const M={class:"text-3xl text-highlighted font-semibold"},B={class:"text-muted text-xs"},j={key:0,class:"p-6 text-sm text-muted flex items-center justify-center min-h-[300px]"},A={class:"text-center"},S={key:1,class:"flex-1 flex flex-col min-h-0"},T={class:"p-4 pb-0 flex-shrink-0"},D={class:"grid grid-cols-3 gap-3 mb-4"},E=["title"],N={class:"flex items-center justify-between mb-2"},z={class:"text-xs font-bold opacity-70"},I=["title"],V={class:"flex-1 px-4 pb-4 min-h-0"},J={class:"border-t border-gray-100 dark:border-gray-800 pt-3"},L={class:"text-sm font-semibold mb-3 text-muted flex items-center justify-between"},O={class:"text-xs opacity-60"},R={class:"overflow-y-auto max-h-166 space-y-2 pr-2 scrollbar-thin"},q=["title"],G={class:"flex items-center gap-3 min-w-0 flex-1"},H={class:"flex items-center gap-2"},K={class:"text-xs font-medium text-gray-500 dark:text-gray-400 min-w-[2rem]"},P={class:"min-w-0 flex-1"},Q=["title"],W={class:"text-xs text-gray-500 dark:text-gray-400"},X={class:"text-right ml-3"},Y={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1"},Z={class:"px-4 pb-4 flex-shrink-0 mt-auto"},ee={class:"border-t border-gray-100 dark:border-gray-800 pt-3"},te={class:"grid grid-cols-3 gap-4 text-center"},se={class:"text-lg font-bold text-blue-600"},oe={class:"text-lg font-bold text-green-600"},ne={class:"text-lg font-bold text-purple-600"},re=w({__name:"CategoryTreemap.client",props:{categories:{}},setup(v){const x=v,_=["#2563eb","#14b8a6","#f97316","#a855f7","#22c55e","#eab308","#6366f1","#ef4444","#06b6d4","#8b5cf6","#f59e0b","#10b981"],i=f(()=>!x.categories||!Array.isArray(x.categories)?0:x.categories.filter(a=>a&&typeof a.amount=="number"&&a.amount>0).reduce((a,s)=>a+(s.amount||0),0)),r=f(()=>!x.categories||!Array.isArray(x.categories)?[]:x.categories.filter(s=>s&&typeof s.amount=="number"&&s.amount>0).sort((s,d)=>d.amount-s.amount).map((s,d)=>({...s,index:d,color:_[d%_.length],percentage:i.value>0?s.amount/i.value*100:0}))),p=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format,k=f(()=>!r.value?.length||!i.value||i.value===0?[]:r.value.map((a,s)=>{if(!a||typeof a.amount!="number")return null;const d=a.amount/i.value*100;let l=Math.max(d*4,20);return s===0?l=Math.max(l,120):s<3?l=Math.max(l,80):s<6?l=Math.max(l,60):l=Math.max(l,40),{...a,percentage:d||0,size:l,gridRow:Math.floor(s/4)+1,gridCol:s%4+1}}).filter(Boolean));return(a,s)=>{const d=F,l=$;return u(),C(l,{ui:{body:"!p-0"},class:"h-[1020px] flex flex-col"},{header:h(()=>[e("div",null,[s[0]||(s[0]=e("p",{class:"text-xs text-muted uppercase mb-1.5"}," Category Breakdown ",-1)),e("p",M,n(o(p)(o(i)||0)),1),e("p",B,n(o(r)?.length||0)+" categories â€¢ Expense distribution ",1)])]),default:h(()=>[o(r)?.length?(u(),g("div",S,[e("div",T,[e("div",D,[(u(!0),g(y,null,b((o(k)||[]).slice(0,3),(t,c)=>(u(),g("div",{key:t?.name||c,class:"relative rounded-lg p-3 cursor-pointer group transition-all duration-300 hover:scale-105 hover:shadow-lg",style:m([{backgroundColor:(t?.color||"#gray")+"15",borderColor:(t?.color||"#gray")+"40"},{"border-width":"1px"}]),title:`${t?.name||"Unknown"}: ${o(p)(t?.amount||0)} (${(t?.percentage||0).toFixed(1)}%)`},[e("div",N,[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:m({backgroundColor:t?.color||"#gray"})},null,4),e("div",z,n((t?.percentage||0).toFixed(1))+"% ",1)]),e("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate mb-1",title:t?.name||"Unknown"},n((t?.name||"Unknown").length>15?(t?.name||"Unknown").substring(0,15)+"...":t?.name||"Unknown"),9,I),e("div",{class:"text-sm font-bold",style:m({color:t?.color||"#gray"})},n(o(p)(t?.amount||0)),5)],12,E))),128))])]),e("div",V,[e("div",J,[e("h4",L,[s[2]||(s[2]=e("span",null,"All Categories",-1)),e("span",O,n(o(r)?.length||0)+" items",1)]),e("div",R,[(u(!0),g(y,null,b(o(r)||[],(t,c)=>(u(),g("div",{key:t?.name||c,class:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-lg transition-colors group cursor-pointer",title:`${t?.name||"Unknown"}: ${o(p)(t?.amount||0)} (${(t?.percentage||0).toFixed(1)}%)`},[e("div",G,[e("div",H,[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:m({backgroundColor:t?.color||"#gray"})},null,4),e("span",K," #"+n(c+1),1)]),e("div",P,[e("div",{class:"text-sm font-medium truncate",title:t?.name||"Unknown"},n(t?.name||"Unknown Category"),9,Q),e("div",W,n((t?.percentage||0).toFixed(1))+"% of total expenses ",1)])]),e("div",X,[e("div",{class:"text-sm font-semibold",style:m({color:t?.color||"#gray"})},n(o(p)(t?.amount||0)),5),e("div",Y,[e("div",{class:"h-1.5 rounded-full transition-all duration-500",style:m({backgroundColor:t?.color||"#gray",width:`${Math.max(t?.percentage||0,2)}%`})},null,4)])])],8,q))),128))])])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[e("div",se,n(o(r)?.length||0),1),s[3]||(s[3]=e("div",{class:"text-xs text-muted"},"Categories",-1))]),e("div",null,[e("div",oe,n(o(r)?.[0]&&o(i)?(o(r)[0].amount/o(i)*100).toFixed(1):0)+"% ",1),s[4]||(s[4]=e("div",{class:"text-xs text-muted"},"Top Category",-1))]),e("div",null,[e("div",ne,n(o(r)?.length&&o(i)&&o(r).slice(0,3).reduce((t,c)=>t+(c?.amount||0),0)>0?(o(r).slice(0,3).reduce((t,c)=>t+(c?.amount||0),0)/o(i)*100).toFixed(1):0)+"% ",1),s[5]||(s[5]=e("div",{class:"text-xs text-muted"},"Top 3 Share",-1))])])])])])):(u(),g("div",j,[e("div",A,[U(d,{name:"i-lucide-layers",class:"h-12 w-12 text-muted/50 mx-auto mb-4"}),s[1]||(s[1]=e("p",null,"Category breakdown will appear when we detect expenses in this range.",-1))])]))]),_:1})}}}),ie=Object.assign(re,{__name:"ExpensesCategoryTreemap"});export{ie as default};
