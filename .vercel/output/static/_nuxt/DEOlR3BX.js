const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO-gSjhu.js","./CTkq0g8j.js","./entry.BlfJEl4J.css","./D0TfP2D2.js","./DsTXvJJt.js","./DlAUqK2U.js","./CategoryDonut.BGFNXWxN.css","./L1YCS4JR.js","./n3mZwdpL.js"])))=>i.map(i=>d[i]);
import{d as W,r as q,C as c,o as i,i as s,b as z,j as y,w as n,f as t,M as e,_ as ee,Q as te,I as h,aI as J,J as r,D as se,F as j,E as U,S as Q,g as F,l as le,T as Y,U as de,aG as K,n as ce,aH as G,O as Z}from"./CTkq0g8j.js";import{_ as ue}from"./Bnt8U3Zn.js";import{a as me,_ as ge}from"./CEF2G4p6.js";import{_ as pe}from"./BNdDGCEv.js";import{_ as xe}from"./BPEqyxMU.js";import{_ as _e}from"./D0TfP2D2.js";import{_ as ae}from"./DsTXvJJt.js";import{_ as oe}from"./Djkiha65.js";import"./BD5aOVH3.js";import"./DRjXbHxH.js";const be={class:"space-y-6"},fe={class:"flex items-center justify-between"},he={class:"flex items-center gap-3"},ve={class:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg"},ye={class:"flex items-center gap-2"},we={key:0,class:"p-8 text-center"},ke={class:"p-6 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-2xl mb-6 max-w-md mx-auto"},$e={class:"p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm mb-4 w-fit mx-auto"},Ce={key:1,class:"p-8"},Se={class:"text-center"},De={class:"p-6 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-2xl mb-6 max-w-md mx-auto"},Ae={class:"p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm mb-4 w-fit mx-auto animate-pulse"},Te={key:2,class:"p-6"},Ie={class:"text-center"},Ee={class:"p-4 bg-blue-100 dark:bg-blue-900/50 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center"},ze={class:"flex flex-col sm:flex-row gap-3 justify-center items-center"},je={key:3,class:"space-y-6"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ve={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},Pe={class:"flex items-center gap-2 mb-2"},Oe={class:"text-xl font-bold"},Fe={class:"text-xs text-muted"},Ne={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},Le={class:"flex items-center gap-2 mb-2"},Be={class:"text-xs text-muted"},Re={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},Xe={class:"flex items-center gap-2 mb-2"},Me={class:"text-sm font-medium"},qe={class:"text-xs text-muted"},Ge={key:0,class:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4"},Je={class:"flex items-start gap-3"},He={class:"text-blue-800 dark:text-blue-200 leading-relaxed"},Ke={class:"flex items-center gap-3"},Qe={class:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg"},Ye={class:"text-sm text-muted"},Ze={class:"space-y-3"},We={class:"flex items-start justify-between mb-2"},et={class:"flex items-center gap-2"},tt={class:"font-medium"},st={class:"text-sm font-semibold"},at={class:"text-sm text-gray-700 dark:text-gray-300 mb-2"},ot={class:"bg-green-50 dark:bg-green-950/20 rounded p-3"},nt={class:"flex items-start gap-2"},rt={class:"text-sm text-green-800 dark:text-green-200"},it={class:"flex items-center gap-3"},lt={class:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg"},dt={class:"text-sm text-muted"},ct={class:"space-y-4"},ut={class:"flex items-start justify-between mb-3"},mt={class:"flex items-center gap-3"},gt={class:"flex items-center gap-2 mb-1"},pt={class:"font-medium"},xt={class:"text-sm text-muted capitalize"},_t={class:"text-right"},bt={class:"text-lg font-bold text-green-600"},ft={class:"text-sm text-gray-700 dark:text-gray-300 mb-3"},ht={class:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-3"},vt={class:"space-y-1"},yt={class:"text-blue-600 font-medium"},wt={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},kt={class:"flex items-center gap-3"},$t={class:"space-y-3"},Ct={class:"text-sm"},St={class:"flex items-center gap-3"},Dt={class:"space-y-3"},At={class:"text-sm"},Tt=W({__name:"ExpensesAIInsights",setup(ne){const v=q(!1),k=q(!1),d=q(null),V=q(null);async function L(){if(!v.value){k.value&&(k.value=!1,d.value=null),v.value=!0,V.value=null;try{const _=await $fetch("/api/ai/expense-insights");d.value=_,k.value=!0}catch(_){V.value=_,console.error("Failed to load AI insights:",_)}finally{v.value=!1}}}const P=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format,B=_=>{switch(_){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"blue";default:return"gray"}},I=_=>{switch(_){case"high":return"green";case"medium":return"yellow";case"low":return"blue";default:return"gray"}},C=_=>{switch(_){case"cost_reduction":return"i-lucide-trending-down";case"process_improvement":return"i-lucide-settings";case"policy_change":return"i-lucide-file-text";case"vendor_negotiation":return"i-lucide-handshake";default:return"i-lucide-lightbulb"}};return(_,o)=>{const p=ee,x=oe,D=te,l=ae;return i(),c("div",be,[s(l,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",fe,[e("div",he,[e("div",ve,[s(p,{name:"i-lucide-brain",class:"h-5 w-5 text-purple-600 dark:text-purple-400"})]),o[2]||(o[2]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"AI-Powered Insights"),e("p",{class:"text-sm text-muted"},"Intelligent analysis powered by Groq")],-1))]),e("div",ye,[t(d)?.data?.model?(i(),z(x,{key:0,color:"purple",variant:"subtle"},{default:n(()=>[h(r(t(d).data.model),1)]),_:1})):y("",!0),t(k)?(i(),z(D,{key:1,icon:"i-lucide-refresh-cw",size:"sm",color:"gray",variant:"ghost",loading:t(v),onClick:L},null,8,["loading"])):y("",!0)])])]),default:n(()=>[!t(k)&&!t(v)&&!t(V)?(i(),c("div",we,[e("div",ke,[e("div",$e,[s(p,{name:"i-lucide-brain",class:"h-8 w-8 text-purple-600 dark:text-purple-400"})]),o[3]||(o[3]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2"},"AI-Powered Financial Analysis",-1)),o[4]||(o[4]=e("p",{class:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed"}," Get intelligent insights, anomaly detection, and optimization recommendations powered by advanced AI ",-1))]),s(D,{size:"lg",color:"purple",onClick:L,class:"shadow-lg"},{default:n(()=>[s(p,{name:"i-lucide-sparkles",class:"h-5 w-5 mr-2"}),o[5]||(o[5]=h(" Generate AI Insights ",-1))]),_:1,__:[5]}),o[6]||(o[6]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-4"}," Powered by Groq Llama 3.3 70B â€¢ Secure & Private Analysis ",-1))])):t(v)?(i(),c("div",Ce,[e("div",Se,[e("div",De,[e("div",Ae,[s(p,{name:"i-lucide-brain",class:"h-8 w-8 text-purple-600 dark:text-purple-400"})]),o[7]||(o[7]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2"},"Analyzing Your Financial Data",-1)),o[8]||(o[8]=e("p",{class:"text-gray-600 dark:text-gray-400 text-sm"}," Our AI is processing your expense data to generate intelligent insights... ",-1))]),o[9]||(o[9]=e("div",{class:"flex items-center justify-center gap-2"},[e("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),e("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),e("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1)),o[10]||(o[10]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-4"}," This may take a few moments... ",-1))])])):t(V)?(i(),c("div",Te,[e("div",Ie,[e("div",Ee,[s(p,{name:"i-lucide-brain",class:"h-10 w-10 text-blue-600 dark:text-blue-400"})]),o[13]||(o[13]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"},"AI Analysis Requires Xero Connection",-1)),o[14]||(o[14]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto"}," Connect your Xero account to unlock AI-powered expense insights, anomaly detection, and optimization recommendations. ",-1)),e("div",ze,[s(D,{color:"blue",size:"lg",onClick:o[0]||(o[0]=m=>("navigateTo"in _?_.navigateTo:t(J))("/api/xero/login"))},{default:n(()=>[s(p,{name:"i-lucide-link",class:"h-5 w-5 mr-2"}),o[11]||(o[11]=h(" Connect to Xero ",-1))]),_:1,__:[11]}),s(D,{color:"gray",variant:"ghost",size:"lg",onClick:o[1]||(o[1]=m=>("navigateTo"in _?_.navigateTo:t(J))("/settings"))},{default:n(()=>[s(p,{name:"i-lucide-settings",class:"h-5 w-5 mr-2"}),o[12]||(o[12]=h(" Settings ",-1))]),_:1,__:[12]})])])])):t(d)?.data?(i(),c("div",je,[e("div",Ue,[e("div",Ve,[e("div",Pe,[s(p,{name:"i-lucide-calendar",class:"h-4 w-4 text-blue-600"}),o[15]||(o[15]=e("span",{class:"text-sm font-medium text-muted"},"Current Period",-1))]),e("p",Oe,r(t(P)(t(d).data.period.current.total)),1),e("p",Fe,r(t(d).data.period.current.transactionCount)+" transactions",1)]),e("div",Ne,[e("div",Le,[s(p,{name:"i-lucide-trending-up",class:"h-4 w-4 text-green-600"}),o[16]||(o[16]=e("span",{class:"text-sm font-medium text-muted"},"Period Change",-1))]),e("p",{class:se(["text-xl font-bold",t(d).data.period.change.amount>=0?"text-red-600":"text-green-600"])},r(t(d).data.period.change.amount>=0?"+":"")+r(t(d).data.period.change.percentage.toFixed(1))+"% ",3),e("p",Be,r(t(P)(Math.abs(t(d).data.period.change.amount)))+" change",1)]),e("div",Re,[e("div",Xe,[s(p,{name:"i-lucide-clock",class:"h-4 w-4 text-purple-600"}),o[17]||(o[17]=e("span",{class:"text-sm font-medium text-muted"},"Last Updated",-1))]),e("p",Me,r(new Date(t(d).data.generatedAt).toLocaleTimeString()),1),e("p",qe,r(new Date(t(d).data.generatedAt).toLocaleDateString()),1)])]),t(d).data.insights.summary?(i(),c("div",Ge,[e("div",Je,[s(p,{name:"i-lucide-lightbulb",class:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e("div",null,[o[18]||(o[18]=e("h4",{class:"font-semibold text-blue-900 dark:text-blue-100 mb-2"},"Executive Summary",-1)),e("p",He,r(t(d).data.insights.summary),1)])])])):y("",!0)])):y("",!0)]),_:1}),t(d)?.data?.anomalies?.anomalies?.length?(i(),z(l,{key:0},{header:n(()=>[e("div",Ke,[e("div",Qe,[s(p,{name:"i-lucide-alert-triangle",class:"h-5 w-5 text-red-600 dark:text-red-400"})]),e("div",null,[o[19]||(o[19]=e("h3",{class:"text-lg font-semibold"},"Anomalies Detected",-1)),e("p",Ye,r(t(d).data.anomalies.anomalies.length)+" issues found",1)])])]),default:n(()=>[e("div",Ze,[(i(!0),c(j,null,U(t(d).data.anomalies.anomalies,(m,$)=>(i(),c("div",{key:$,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",We,[e("div",et,[s(x,{color:B(m.severity),variant:"subtle"},{default:n(()=>[h(r(m.severity.toUpperCase()),1)]),_:2},1032,["color"]),e("span",tt,r(m.type),1)]),e("span",st,r(t(P)(m.amount)),1)]),e("p",at,r(m.description),1),e("div",ot,[e("div",nt,[s(p,{name:"i-lucide-lightbulb",class:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e("p",rt,r(m.suggestion),1)])])]))),128))])]),_:1})):y("",!0),t(d)?.data?.optimization?.recommendations?.length?(i(),z(l,{key:1},{header:n(()=>[e("div",it,[e("div",lt,[s(p,{name:"i-lucide-target",class:"h-5 w-5 text-green-600 dark:text-green-400"})]),e("div",null,[o[20]||(o[20]=e("h3",{class:"text-lg font-semibold"},"Optimization Opportunities",-1)),e("p",dt,r(t(d).data.optimization.recommendations.length)+" recommendations",1)])])]),default:n(()=>[e("div",ct,[(i(!0),c(j,null,U(t(d).data.optimization.recommendations,(m,$)=>(i(),c("div",{key:$,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",ut,[e("div",mt,[s(p,{name:C(m.type),class:"h-5 w-5 text-gray-600"},null,8,["name"]),e("div",null,[e("div",gt,[e("span",pt,r(m.category),1),s(x,{color:I(m.impact),variant:"subtle"},{default:n(()=>[h(r(m.impact.toUpperCase())+" IMPACT ",1)]),_:2},1032,["color"])]),e("p",xt,r(m.type.replace("_"," ")),1)])]),e("div",_t,[e("p",bt,r(t(P)(m.savings_potential)),1),o[21]||(o[21]=e("p",{class:"text-xs text-muted"},"Potential Savings",-1))])]),e("p",ft,r(m.description),1),e("div",ht,[o[22]||(o[22]=e("h5",{class:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"},"Action Steps:",-1)),e("ul",vt,[(i(!0),c(j,null,U(m.action_steps,(E,N)=>(i(),c("li",{key:N,class:"flex items-start gap-2 text-sm text-blue-800 dark:text-blue-200"},[e("span",yt,r(N+1)+".",1),e("span",null,r(E),1)]))),128))])])]))),128))])]),_:1})):y("",!0),t(d)?.data?.insights?(i(),c("div",wt,[t(d).data.insights.trends?.length?(i(),z(l,{key:0},{header:n(()=>[e("div",kt,[s(p,{name:"i-lucide-trending-up",class:"h-5 w-5 text-blue-600"}),o[23]||(o[23]=e("h3",{class:"font-semibold"},"Spending Trends",-1))])]),default:n(()=>[e("ul",$t,[(i(!0),c(j,null,U(t(d).data.insights.trends,(m,$)=>(i(),c("li",{key:$,class:"flex items-start gap-3"},[o[24]||(o[24]=e("div",{class:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"},null,-1)),e("p",Ct,r(m),1)]))),128))])]),_:1})):y("",!0),t(d).data.insights.insights?.length?(i(),z(l,{key:1},{header:n(()=>[e("div",St,[s(p,{name:"i-lucide-eye",class:"h-5 w-5 text-purple-600"}),o[25]||(o[25]=e("h3",{class:"font-semibold"},"Key Insights",-1))])]),default:n(()=>[e("ul",Dt,[(i(!0),c(j,null,U(t(d).data.insights.insights,(m,$)=>(i(),c("li",{key:$,class:"flex items-start gap-3"},[o[26]||(o[26]=e("div",{class:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"},null,-1)),e("p",At,r(m),1)]))),128))])]),_:1})):y("",!0)])):y("",!0)])}}}),It=Object.assign(Tt,{__name:"ExpensesAIInsights"}),Et={class:"flex items-center gap-2"},zt={class:"text-sm text-muted"},jt={key:0,class:"space-y-4"},Ut={key:1,class:"text-negative text-sm"},Vt={key:2,class:"space-y-8"},Pt={key:0,class:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-950/50 dark:to-orange-950/50 rounded-xl p-6 border border-red-200 dark:border-red-800/50 mb-8"},Ot={class:"text-center"},Ft={class:"p-4 bg-red-100 dark:bg-red-900/50 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center"},Nt={class:"flex flex-col sm:flex-row gap-3 justify-center items-center"},Lt={key:1},Bt={class:"bg-gray-50/50 dark:bg-gray-800/20 mb-5 rounded-xl p-6 border border-gray-200 dark:border-gray-700/50"},Rt={class:"flex items-center justify-between mb-4"},Xt={class:"flex items-center gap-3"},Mt={class:"p-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},qt={class:"text-sm text-muted"},Gt={key:0,class:"flex items-center gap-2"},Jt={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},Ht={class:"bg-white/50 dark:bg-gray-900/50 rounded-lg p-4 border border-white/20"},Kt={class:"flex items-center gap-2 mb-2"},Qt={class:"text-2xl font-bold text-green-600 mb-1"},Yt={class:"text-xs text-muted"},Zt={class:"bg-white/50 dark:bg-gray-900/50 rounded-lg p-4 border border-white/20"},Wt={class:"flex items-center gap-2 mb-2"},es={class:"text-2xl font-bold text-blue-600 mb-1"},ts={class:"text-xs text-muted"},ss={class:"bg-white/50 dark:bg-gray-900/50 rounded-lg p-4 border border-white/20"},as={class:"flex items-center gap-2 mb-2"},os=["title"],ns={class:"text-xs text-muted"},rs={class:"bg-white/50 dark:bg-gray-900/50 rounded-lg p-4 border border-white/20"},is={class:"flex items-center gap-2 mb-2"},ls=["title"],ds={class:"text-xs text-muted"},cs={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},us={class:"xl:col-span-2 space-y-6"},ms={class:"flex items-center justify-between"},gs={class:"flex items-center gap-3"},ps={class:"p-2 bg-blue-50 dark:bg-blue-900/50 rounded-lg"},xs={class:"flex items-center justify-between"},_s={class:"flex items-center gap-3"},bs={class:"p-2 bg-green-50 dark:bg-green-900/50 rounded-lg"},fs={class:"space-y-6"},hs={class:"flex items-center gap-3"},vs={class:"p-2 bg-orange-50 dark:bg-orange-900/50 rounded-lg"},ys={class:"flex items-center gap-3"},ws={class:"p-2 bg-purple-50 dark:bg-purple-900/50 rounded-lg"},ks={class:"space-y-4"},$s={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Cs={class:"flex items-center gap-3"},Ss={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Ds={class:"flex items-center gap-3"},As={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg"},Ts={class:"flex items-center gap-3"},Is={class:"flex items-center gap-3"},Es={class:"p-2 bg-indigo-50 dark:bg-indigo-900/50 rounded-lg"},zs={class:"space-y-6"},js={class:"space-y-2"},Us={class:"flex items-center justify-between text-sm mb-1"},Vs=["title"],Ps={class:"text-xs text-muted"},Os={class:"h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden"},Fs={class:"border-t border-gray-100 dark:border-gray-800 pt-4"},Ns={class:"space-y-2"},Ls=["title"],Bs={class:"font-medium text-green-600 text-xs"},Rs={class:"border-t border-gray-100 dark:border-gray-800 pt-4"},Xs={class:"grid grid-cols-2 gap-2"},Ms={class:"mt-8"},qs={class:"flex items-center justify-center h-32"},Gs={class:"text-center"},aa=W({__name:"index",async setup(ne){let v,k;const d=K(()=>G(()=>import("./DO-gSjhu.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),V=K(()=>G(()=>import("./L1YCS4JR.js"),__vite__mapDeps([7,1,2,4]),import.meta.url)),L=K(()=>G(()=>import("./n3mZwdpL.js"),__vite__mapDeps([8,1,2,4]),import.meta.url)),{data:P,refresh:B}=([v,k]=Q(()=>Y("/api/xero/status","$4ZSACgDqeX")),v=await v,k(),v),I=F(()=>P.value?.connected||!1),{data:C,pending:_,error:o,refresh:p}=([v,k]=Q(()=>Y("/api/xero/expenses",{lazy:!0},"$NNgVTOHDDy")),v=await v,k(),v);le(I,async(u,a)=>{u!==a&&u&&await p()});const x=F(()=>C.value??null),D=F(()=>{const u=x.value?.range?.from,a=x.value?.range?.to;if(!u||!a)return 90;const S=new Date(u),A=new Date(a).valueOf()-S.valueOf();return Math.max(Math.ceil(A/(1e3*60*60*24))||0,1)}),l=F(()=>{const u=x.value?.categories??[],a=x.value?.vendors??[],S=u.reduce((w,T)=>w+(T.amount||0),0),b=S/D.value,A=u[0],R=a[0];return{totalSpend:S,averagePerDay:b,categoryCount:u.length,vendorCount:a.length,topCategory:A,topVendor:R}}),m=F(()=>[{label:"Reports",to:"/reports"},{label:"Expense Analytics",to:"/expenses"}]),$=F(()=>{if(!I.value)return"Connect to Xero to view expense data";const u=x.value?.range?.from,a=x.value?.range?.to;return!u||!a?"Trailing 90 days":`Last ${D.value} days (${u} â†’ ${a})`});function E(u){return typeof u!="number"||Number.isNaN(u)?"-":u.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}async function N(u){try{const{downloadCSV:a,downloadJSON:S,getExportFilename:b}=await G(async()=>{const{downloadCSV:w,downloadJSON:T,getExportFilename:g}=await import("./CmhXBh13.js");return{downloadCSV:w,downloadJSON:T,getExportFilename:g}},[],import.meta.url);if(!x.value)throw new Error("No data to export");const A=[...x.value.categories.map(w=>({type:"Category",name:w.name,amount:w.amount,dateRange:`${x.value?.range?.from} to ${x.value?.range?.to}`})),...x.value.vendors.map(w=>({type:"Vendor",name:w.name,amount:w.amount,dateRange:`${x.value?.range?.from} to ${x.value?.range?.to}`}))];u==="csv"?a(A,b("expenses","csv")):S({exportDate:new Date().toISOString(),dateRange:x.value.range,summary:{totalSpend:l.value.totalSpend,averagePerDay:l.value.averagePerDay,categoryCount:l.value.categoryCount,vendorCount:l.value.vendorCount},data:A},b("expenses","json")),Z().add({title:"Export Successful",description:`Expense data exported as ${u.toUpperCase()}`,icon:"i-lucide-check-circle",color:"green"})}catch(a){console.error("Export failed:",a),Z().add({title:"Export Failed",description:"Unable to export expense data",icon:"i-lucide-alert-circle",color:"red"})}}return(u,a)=>{const S=ue,b=te,A=ge,R=pe,w=xe,T=_e,g=ee,X=de,O=ae,M=oe,re=It,ie=me;return i(),z(ie,{id:"expenses"},{header:n(()=>[s(A,{title:"Expense Analytics"},{leading:n(()=>[s(S)]),right:n(()=>[e("div",Et,[s(b,{icon:"i-lucide-download",label:"CSV",color:"neutral",variant:"ghost",size:"sm",onClick:a[0]||(a[0]=f=>N("csv"))}),s(b,{icon:"i-lucide-file-code",label:"JSON",color:"neutral",variant:"ghost",size:"sm",onClick:a[1]||(a[1]=f=>N("json")),class:"hidden sm:flex"}),s(b,{icon:"i-lucide-refresh-cw",label:"Refresh",color:"neutral",size:"sm",onClick:a[2]||(a[2]=async()=>{await t(B)(),await t(p)()}),class:"hidden sm:flex"}),s(b,{icon:"i-lucide-refresh-cw",color:"neutral",variant:"ghost",size:"sm",onClick:a[3]||(a[3]=async()=>{await t(B)(),await t(p)()}),class:"sm:hidden"})])]),_:1}),s(w,null,{left:n(()=>[s(R,{links:t(m)},null,8,["links"])]),right:n(()=>[e("span",zt,r(t($)),1)]),_:1})]),body:n(()=>[t(_)?(i(),c("div",jt,[s(T,{class:"h-6 w-40"}),s(T,{class:"h-32 w-full"})])):t(o)?(i(),c("div",Ut," Failed to load expenses. ")):(i(),c("div",Vt,[t(I)?y("",!0):(i(),c("div",Pt,[e("div",Ot,[e("div",Ft,[s(g,{name:"i-lucide-plug-zap",class:"h-10 w-10 text-red-600 dark:text-red-400"})]),a[8]||(a[8]=e("h2",{class:"text-xl font-bold text-red-900 dark:text-red-100 mb-2"},"Xero Connection Required",-1)),a[9]||(a[9]=e("p",{class:"text-red-700 dark:text-red-300 mb-6 max-w-md mx-auto"}," To view your expense analytics, you need to connect your Xero account. This ensures you see real, up-to-date financial data. ",-1)),e("div",Nt,[s(b,{color:"red",size:"lg",onClick:a[4]||(a[4]=f=>("navigateTo"in u?u.navigateTo:t(J))("/api/xero/login"))},{default:n(()=>[s(g,{name:"i-lucide-link",class:"h-5 w-5 mr-2"}),a[6]||(a[6]=h(" Connect to Xero ",-1))]),_:1,__:[6]}),s(b,{color:"gray",variant:"ghost",size:"lg",onClick:a[5]||(a[5]=f=>("navigateTo"in u?u.navigateTo:t(J))("/settings"))},{default:n(()=>[s(g,{name:"i-lucide-settings",class:"h-5 w-5 mr-2"}),a[7]||(a[7]=h(" Settings ",-1))]),_:1,__:[7]})])])])),t(I)?(i(),c("div",Lt,[e("div",Bt,[e("div",Rt,[e("div",Xt,[e("div",Mt,[s(g,{name:"i-lucide-trending-up",class:"h-5 w-5 text-gray-600 dark:text-gray-400"})]),e("div",null,[a[10]||(a[10]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Financial Overview",-1)),e("p",qt,r(t($)),1)])]),t(I)?(i(),c("div",Gt,a[11]||(a[11]=[e("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),e("span",{class:"text-xs text-green-700 dark:text-green-300 font-medium"},"Live Data",-1)]))):y("",!0)]),e("div",Jt,[e("div",Ht,[e("div",Kt,[s(g,{name:"i-lucide-dollar-sign",class:"h-4 w-4 text-green-600"}),a[12]||(a[12]=e("p",{class:"text-xs font-medium text-muted uppercase tracking-wide"},"Total Spend",-1))]),e("p",Qt,r(E(t(l).totalSpend)),1),e("p",Yt," Across "+r(t(l).categoryCount)+" categories ",1)]),e("div",Zt,[e("div",Wt,[s(g,{name:"i-lucide-calendar",class:"h-4 w-4 text-blue-600"}),a[13]||(a[13]=e("p",{class:"text-xs font-medium text-muted uppercase tracking-wide"},"Daily Average",-1))]),e("p",es,r(E(t(l).averagePerDay)),1),e("p",ts," Over "+r(t(D))+" days ",1)]),e("div",ss,[e("div",as,[s(g,{name:"i-lucide-tag",class:"h-4 w-4 text-purple-600"}),a[14]||(a[14]=e("p",{class:"text-xs font-medium text-muted uppercase tracking-wide"},"Top Category",-1))]),e("p",{class:"text-lg font-bold text-purple-600 mb-1 truncate",title:t(l).topCategory?.name},r(t(l).topCategory?.name||"No data"),9,os),e("p",ns,r(E(t(l).topCategory?.amount)),1)]),e("div",rs,[e("div",is,[s(g,{name:"i-lucide-building",class:"h-4 w-4 text-orange-600"}),a[15]||(a[15]=e("p",{class:"text-xs font-medium text-muted uppercase tracking-wide"},"Top Vendor",-1))]),e("p",{class:"text-lg font-bold text-orange-600 mb-1 truncate",title:t(l).topVendor?.name},r(t(l).topVendor?.name||"No data"),9,ls),e("p",ds,r(E(t(l).topVendor?.amount)),1)])])]),e("div",cs,[e("div",us,[s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",ms,[e("div",gs,[e("div",ps,[s(g,{name:"i-lucide-pie-chart",class:"h-5 w-5 text-blue-600 dark:text-blue-400"})]),a[16]||(a[16]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Expense Distribution"),e("p",{class:"text-sm text-muted"},"Category breakdown and analysis")],-1))])])]),default:n(()=>[s(X,null,{default:n(()=>[s(t(d),{categories:t(C)?.categories||[]},null,8,["categories"])]),_:1})]),_:1}),s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",xs,[e("div",_s,[e("div",bs,[s(g,{name:"i-lucide-layout-grid",class:"h-5 w-5 text-green-600 dark:text-green-400"})]),a[17]||(a[17]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Category Breakdown"),e("p",{class:"text-sm text-muted"},"Visual expense distribution")],-1))]),s(M,{color:"primary",variant:"subtle"},{default:n(()=>[h(r((t(C)?.categories||[]).length)+" categories ",1)]),_:1})])]),default:n(()=>[s(X,null,{default:n(()=>[s(t(L),{categories:t(C)?.categories||[]},null,8,["categories"])]),_:1})]),_:1})]),e("div",fs,[s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",hs,[e("div",vs,[s(g,{name:"i-lucide-bar-chart-3",class:"h-5 w-5 text-orange-600 dark:text-orange-400"})]),a[18]||(a[18]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Vendor Analysis"),e("p",{class:"text-sm text-muted"},"Top spending relationships")],-1))])]),default:n(()=>[s(X,null,{default:n(()=>[s(t(V),{vendors:t(C)?.vendors||[]},null,8,["vendors"])]),_:1})]),_:1}),s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",ys,[e("div",ws,[s(g,{name:"i-lucide-activity",class:"h-5 w-5 text-purple-600 dark:text-purple-400"})]),a[19]||(a[19]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Key Insights"),e("p",{class:"text-sm text-muted"},"Performance indicators")],-1))])]),default:n(()=>[e("div",ks,[e("div",$s,[e("div",Cs,[s(g,{name:"i-lucide-users",class:"h-4 w-4 text-blue-600"}),a[20]||(a[20]=e("span",{class:"text-sm font-medium"},"Active Vendors",-1))]),s(M,{color:"blue",variant:"subtle"},{default:n(()=>[h(r(t(l).vendorCount),1)]),_:1})]),e("div",Ss,[e("div",Ds,[s(g,{name:"i-lucide-layers",class:"h-4 w-4 text-green-600"}),a[21]||(a[21]=e("span",{class:"text-sm font-medium"},"Expense Categories",-1))]),s(M,{color:"green",variant:"subtle"},{default:n(()=>[h(r(t(l).categoryCount),1)]),_:1})]),e("div",As,[e("div",Ts,[s(g,{name:"i-lucide-percent",class:"h-4 w-4 text-purple-600"}),a[22]||(a[22]=e("span",{class:"text-sm font-medium"},"Top Category Share",-1))]),s(M,{color:"purple",variant:"subtle"},{default:n(()=>[h(r(t(l).topCategory&&t(l).totalSpend>0?`${(t(l).topCategory.amount/t(l).totalSpend*100).toFixed(1)}%`:"0%"),1)]),_:1})])])]),_:1}),s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{header:n(()=>[e("div",Is,[e("div",Es,[s(g,{name:"i-lucide-trending-up",class:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})]),a[23]||(a[23]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Expense Trends"),e("p",{class:"text-sm text-muted"},"Distribution patterns")],-1))])]),default:n(()=>[e("div",zs,[e("div",null,[a[24]||(a[24]=e("h4",{class:"text-sm font-semibold mb-3 text-muted"},"Top 5 Categories",-1)),e("div",js,[(i(!0),c(j,null,U((t(C)?.categories||[]).slice(0,5),(f,H)=>(i(),c("div",{key:f.name,class:"relative"},[e("div",Us,[e("span",{class:"truncate",title:f.name},r(f.name.length>20?f.name.substring(0,20)+"...":f.name),9,Vs),e("span",Ps,r(t(l).totalSpend>0?(f.amount/t(l).totalSpend*100).toFixed(1):0)+"% ",1)]),e("div",Os,[e("div",{class:"h-full rounded-full transition-all duration-500",style:ce({backgroundColor:["#3b82f6","#10b981","#8b5cf6","#f97316","#ef4444"][H%5],width:t(l).totalSpend>0?`${f.amount/t(l).totalSpend*100}%`:"0%"})},null,4)])]))),128))])]),e("div",Fs,[a[25]||(a[25]=e("h4",{class:"text-sm font-semibold mb-3 text-muted"},"Top 5 Vendors",-1)),e("div",Ns,[(i(!0),c(j,null,U((t(C)?.vendors||[]).slice(0,5),(f,H)=>(i(),c("div",{key:f.name,class:"flex items-center gap-2 text-sm"},[e("div",{class:se(["w-3 h-3 rounded-full flex-shrink-0",`bg-${["indigo","cyan","pink","yellow","emerald"][H%5]}-500`])},null,2),e("span",{class:"truncate flex-1",title:f.name},r(f.name),9,Ls),e("span",Bs,r(E(f.amount)),1)]))),128))])]),e("div",Rs,[a[30]||(a[30]=e("h4",{class:"text-sm font-semibold mb-3 text-muted"},"Quick Actions",-1)),e("div",Xs,[s(b,{size:"sm",variant:"ghost",class:"justify-start text-xs"},{default:n(()=>[s(g,{name:"i-lucide-filter",class:"h-3 w-3"}),a[26]||(a[26]=h(" Filter ",-1))]),_:1,__:[26]}),s(b,{size:"sm",variant:"ghost",class:"justify-start text-xs"},{default:n(()=>[s(g,{name:"i-lucide-search",class:"h-3 w-3"}),a[27]||(a[27]=h(" Search ",-1))]),_:1,__:[27]}),s(b,{size:"sm",variant:"ghost",class:"justify-start text-xs"},{default:n(()=>[s(g,{name:"i-lucide-calendar",class:"h-3 w-3"}),a[28]||(a[28]=h(" Period ",-1))]),_:1,__:[28]}),s(b,{size:"sm",variant:"ghost",class:"justify-start text-xs"},{default:n(()=>[s(g,{name:"i-lucide-share",class:"h-3 w-3"}),a[29]||(a[29]=h(" Export ",-1))]),_:1,__:[29]})])])])]),_:1})])])])):y("",!0),e("div",Ms,[s(X,null,{fallback:n(()=>[s(O,{class:"shadow-sm border-0 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm"},{default:n(()=>[e("div",qs,[e("div",Gs,[s(T,{class:"h-4 w-32 mx-auto mb-2"}),s(T,{class:"h-3 w-24 mx-auto"})])])]),_:1})]),default:n(()=>[s(re)]),_:1})])]))]),_:1})}}});export{aa as default};
