const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./o36Up_W4.js","./D0TfP2D2.js","./CTkq0g8j.js","./entry.BlfJEl4J.css","./DsTXvJJt.js","./DlAUqK2U.js","./KPICards.CC_smC4o.css","./Cwu0AZ6A.js","./Cs1SCnFX.js","./CashFlowChart.Bka3ujik.css","./LF4aqxTY.js","./InvoicePipeline.B_tbQOWG.css","./C0TWziw8.js","./Djkiha65.js","./AnomalyAlerts.CTSbshyM.css"])))=>i.map(i=>d[i]);
import{d as oe,S as p,g as v,h as F,an as le,b as k,w as n,T as f,o as i,C as d,j as D,M as o,f as t,F as V,E as B,i as e,U as ie,aG as x,Q as re,_ as ce,I as R,J as de,aH as y}from"./CTkq0g8j.js";import{_ as me}from"./Bnt8U3Zn.js";import{a as _e,_ as ue}from"./CEF2G4p6.js";import{_ as pe}from"./BNdDGCEv.js";import{_ as fe}from"./Djkiha65.js";import{_ as he}from"./BPEqyxMU.js";import{_ as ge}from"./Cs1SCnFX.js";import{_ as be}from"./D0TfP2D2.js";import{_ as ve}from"./DsTXvJJt.js";import{_ as xe}from"./DlAUqK2U.js";import"./BD5aOVH3.js";import"./DRjXbHxH.js";const ye=window.setInterval,we={class:"flex items-center gap-3"},ke={key:0,class:"flex items-center gap-2 text-xs text-muted"},De={key:1,class:"flex items-center gap-2 text-xs text-muted"},Ae={class:"flex items-center gap-4"},Ce={class:"text-xs text-muted"},$e={key:0,class:"mb-6"},Ee={key:1,class:"mb-6"},Pe={class:"space-y-6"},Ue={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6"},Ie={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},Le={class:"xl:col-span-2"},Te={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Fe=300*1e3,Ve=oe({__name:"dashboard",async setup(Be){let a,l;const z=x(()=>y(()=>import("./o36Up_W4.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),K=x(()=>y(()=>import("./Cwu0AZ6A.js"),__vite__mapDeps([7,1,2,3,8,4,5,9]),import.meta.url)),O=x(()=>y(()=>import("./LF4aqxTY.js"),__vite__mapDeps([10,2,3,1,8,4,5,11]),import.meta.url)),S=x(()=>y(()=>import("./C0TWziw8.js"),__vite__mapDeps([12,2,3,1,13,4,5,14]),import.meta.url)),{data:N,refresh:Re}=([a,l]=p(()=>f("/api/xero/status","$2YOI5wd6j1")),a=await a,l(),a),m=v(()=>N.value?.connected||!1),{data:A,pending:C,error:j,refresh:$}=([a,l]=p(()=>f("/api/kpis-advanced",{lazy:!0},"$5lTcWRZi2h")),a=await a,l(),a),{data:M,pending:E,refresh:P}=([a,l]=p(()=>f("/api/xero/reports/cash-flow-forecast?days=90",{lazy:!0},"$Ax-xwEIoFk")),a=await a,l(),a),{data:H,pending:Q,refresh:U}=([a,l]=p(()=>f("/api/xero/invoice-pipeline?days=90",{lazy:!0},"$CYrPfn39LU")),a=await a,l(),a),{data:Y,pending:Z,refresh:I}=([a,l]=p(()=>f("/api/ai/anomaly-detection?days=30&sensitivity=2",{lazy:!0},"$jhlyZcLaRU")),a=await a,l(),a);let w;F(()=>{w=ye(()=>{m&&Promise.all([$(),P(),U(),I()])},Fe)}),le(()=>{w&&clearInterval(w)});async function L(){await Promise.all([$(),P(),U(),I()])}F(()=>{const r=s=>{if(s.metaKey||s.ctrlKey)switch(s.key){case"r":s.preventDefault(),L();break;case"k":s.preventDefault();break}};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}});const G=v(()=>[{label:"Home",to:"/"},{label:"Executive Dashboard",to:"/dashboard"}]),J=v(()=>{const r="Executive Dashboard";return m?`${r} • Live`:`${r} • Demo`}),_=v(()=>A.value?.alerts?.filter(r=>r.severity==="critical")||[]);return(r,s)=>{const W=me,c=re,X=ue,q=pe,ee=fe,te=he,T=ge,h=be,g=ie,b=ce,ae=ve,se=_e;return i(),k(se,{id:"executive-dashboard"},{header:n(()=>[e(X,{title:t(J)},{leading:n(()=>[e(W)]),right:n(()=>[o("div",we,[t(m)?(i(),d("div",ke,s[0]||(s[0]=[o("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1),R(" Live Data ",-1)]))):(i(),d("div",De,s[1]||(s[1]=[o("div",{class:"w-2 h-2 bg-amber-500 rounded-full"},null,-1),R(" Demo Mode ",-1)]))),e(c,{icon:"i-lucide-refresh-cw",color:"neutral",variant:"ghost",size:"sm",loading:t(C)||t(E),onClick:L},null,8,["loading"]),e(c,{icon:"i-lucide-settings",color:"neutral",variant:"ghost",size:"sm",to:"/settings"})])]),_:1},8,["title"]),e(te,null,{left:n(()=>[e(q,{links:t(G)},null,8,["links"])]),right:n(()=>[o("div",Ae,[t(_).length>0?(i(),k(ee,{key:0,label:`${t(_).length} Critical Alert${t(_).length>1?"s":""}`,color:"red",variant:"subtle"},null,8,["label"])):D("",!0),o("span",Ce," Updated "+de(new Date().toLocaleTimeString()),1)])]),_:1})]),body:n(()=>[t(_).length>0?(i(),d("div",$e,[(i(!0),d(V,null,B(t(_),u=>(i(),k(T,{key:u.message,icon:"i-lucide-alert-triangle",color:"red",variant:"subtle",title:u.type.replace("_"," ").replace(/\b\w/g,ne=>ne.toUpperCase()),description:u.message,class:"mb-2"},null,8,["title","description"]))),128))])):D("",!0),t(j)&&t(m)?(i(),d("div",Ee,[e(T,{icon:"i-lucide-wifi-off",color:"red",title:"Connection Error",description:"Unable to fetch live data from Xero. Please check your connection."})])):D("",!0),o("div",Pe,[e(g,null,{fallback:n(()=>[o("div",Ue,[(i(),d(V,null,B(4,u=>e(h,{class:"h-32",key:u})),64))])]),default:n(()=>[e(t(z),{data:t(A),loading:t(C),connected:t(m)},null,8,["data","loading","connected"])]),_:1}),o("div",Ie,[o("div",Le,[e(g,null,{fallback:n(()=>[e(h,{class:"h-80"})]),default:n(()=>[e(t(K),{data:t(M),loading:t(E)},null,8,["data","loading"])]),_:1})]),o("div",null,[e(g,null,{fallback:n(()=>[e(h,{class:"h-80"})]),default:n(()=>[e(t(S),{data:t(Y),loading:t(Z)},null,8,["data","loading"])]),_:1})])]),e(g,null,{fallback:n(()=>[e(h,{class:"h-64"})]),default:n(()=>[e(t(O),{data:t(H),loading:t(Q)},null,8,["data","loading"])]),_:1}),e(ae,null,{header:n(()=>s[2]||(s[2]=[o("div",{class:"flex items-center justify-between"},[o("h3",{class:"text-lg font-semibold"},"Quick Actions"),o("span",{class:"text-xs bg-muted px-2 py-1 rounded"},"Cmd+K")],-1)])),default:n(()=>[o("div",Te,[e(c,{to:"/expenses",color:"neutral",variant:"subtle",class:"flex flex-col items-center p-4 h-auto"},{default:n(()=>[e(b,{name:"i-lucide-credit-card",class:"h-6 w-6 mb-2"}),s[3]||(s[3]=o("span",{class:"text-sm"},"Expense Analytics",-1))]),_:1,__:[3]}),e(c,{to:"/reports",color:"neutral",variant:"subtle",class:"flex flex-col items-center p-4 h-auto"},{default:n(()=>[e(b,{name:"i-lucide-bar-chart-3",class:"h-6 w-6 mb-2"}),s[4]||(s[4]=o("span",{class:"text-sm"},"Financial Reports",-1))]),_:1,__:[4]}),e(c,{to:"/cashflow",color:"neutral",variant:"subtle",class:"flex flex-col items-center p-4 h-auto"},{default:n(()=>[e(b,{name:"i-lucide-trending-up",class:"h-6 w-6 mb-2"}),s[5]||(s[5]=o("span",{class:"text-sm"},"Cash Flow",-1))]),_:1,__:[5]}),e(c,{to:"/anomalies",color:"neutral",variant:"subtle",class:"flex flex-col items-center p-4 h-auto"},{default:n(()=>[e(b,{name:"i-lucide-search",class:"h-6 w-6 mb-2"}),s[6]||(s[6]=o("span",{class:"text-sm"},"Anomaly Detection",-1))]),_:1,__:[6]})])]),_:1})])]),_:1})}}}),Je=xe(Ve,[["__scopeId","data-v-0b28a045"]]);export{Je as default};
