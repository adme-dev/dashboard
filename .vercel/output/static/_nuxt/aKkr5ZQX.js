import{a4 as z,d as K,c as Q,t as xe,ah as W,aJ as oe,r as C,a as ne,l as Ce,aL as X,b as q,o as w,w as E,e as k,j as se,f as t,q as H,P as V,b4 as Ee,i as ue,s as T,v as D,g as $,bk as qe,h as we,an as Ie,p as Y,u as re,bl as Le,a3 as Ke}from"./CTkq0g8j.js";import{e as ke,u as Ve,h as Be,j as Fe,a as de}from"./BDXzKZ7Z.js";import{u as Se}from"./CNMwNZYC.js";import{V as He}from"./CqG_A43z.js";function Ae(n,u,a){const o=n.findIndex(c=>z(c,u)),d=n.findIndex(c=>z(c,a));if(o===-1||d===-1)return[];const[s,g]=[o,d].sort((c,r)=>c-r);return n.slice(s,g+1)}function Te(n,u,a){return n===void 0?!1:Array.isArray(n)?n.some(o=>A(o,u,a)):A(n,u,a)}function A(n,u,a){return n===void 0||u===void 0?!1:typeof n=="string"?n===u:typeof a=="function"?a(n,u):typeof a=="string"?n?.[a]===u?.[a]:z(n,u)}const[Z,Pe]=Q("ListboxRoot");var Me=K({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:u,emit:a}){const o=n,d=a,{multiple:s,highlightOnHover:g,orientation:c,disabled:r,selectionBehavior:_,dir:y}=xe(o),{getItems:h}=W({isProvider:!0}),{handleTypeaheadSearch:B}=ke(),{primitiveElement:P,currentElement:v}=oe(),x=Fe(),M=Ve(y),fe=Se(v),R=C(),F=C(!1),G=C(!0),p=ne(o,"modelValue",d,{defaultValue:o.defaultValue??(s.value?[]:void 0),passive:o.modelValue===void 0,deep:!0});function ce(e){if(F.value=!0,o.multiple){const i=Array.isArray(p.value)?[...p.value]:[],l=i.findIndex(f=>A(f,e,o.by));o.selectionBehavior==="toggle"?(l===-1?i.push(e):i.splice(l,1),p.value=i):(p.value=[e],R.value=e)}else o.selectionBehavior==="toggle"&&A(p.value,e,o.by)?p.value=void 0:p.value=e;setTimeout(()=>{F.value=!1},1)}const m=C(null),N=C(null),I=C(!1),O=C(!1),ee=X(),j=X(),te=X();function U(){return h().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;m.value=e,G.value&&m.value.focus(),i&&m.value.scrollIntoView({block:"nearest"});const l=h().find(f=>f.ref===e);d("highlight",l)}function ve(e){if(I.value)te.trigger(e);else{const i=h().find(l=>A(l.value,e,o.by));i&&(m.value=i.ref,b(i.ref))}}function pe(e){m.value&&m.value.isConnected&&(e.preventDefault(),e.stopPropagation(),O.value||m.value.click())}function me(e){if(G.value){if(F.value=!0,I.value)j.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const l=h(),f=l.map(L=>L.value);p.value=[...f],e.preventDefault(),b(l[l.length-1].ref)}else if(!i){const l=B(e.key,h());l&&b(l)}}setTimeout(()=>{F.value=!1},1)}}function he(){O.value=!0}function ge(){H(()=>{O.value=!1})}function ae(){H(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function J(e){const i=m.value;i?.isConnected&&(N.value=i),m.value=null,d("leave",e)}function ye(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),d("entryFocus",i),!i.defaultPrevented)if(N.value)b(N.value);else{const l=U()?.[0];b(l)}}function ie(e){const i=Be(e,c.value,M.value);if(!i)return;let l=U();if(m.value){if(i==="last")l.reverse();else if(i==="prev"||i==="next"){i==="prev"&&l.reverse();const f=l.indexOf(m.value);l=l.slice(f+1)}be(e,l[0])}if(l.length){const f=!m.value&&i==="prev"?l.length-1:0;b(l[f])}if(I.value)return j.trigger(e)}function be(e,i){if(!(I.value||o.selectionBehavior!=="replace"||!s.value||!Array.isArray(p.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const f=h().filter(S=>S.ref.dataset.disabled!=="");let L=f.find(S=>S.ref===i)?.value;if(e.key===x.END?L=f[f.length-1].value:e.key===x.HOME&&(L=f[0].value),!L||!R.value)return;const _e=Ae(f.map(S=>S.value),R.value,L);p.value=_e}}async function le(e){if(await H(),I.value)ee.trigger(e);else{const i=U(),l=i.find(f=>f.dataset.state==="checked");l?b(l):i.length&&b(i[0])}}return Ce(p,()=>{F.value||H(()=>{le()})},{immediate:!0,deep:!0}),u({highlightedElement:m,highlightItem:ve,highlightFirstItem:ae,highlightSelected:le,getItems:h}),Pe({modelValue:p,onValueChange:ce,multiple:s,orientation:c,dir:M,disabled:r,highlightOnHover:g,highlightedElement:m,isVirtual:I,virtualFocusHook:ee,virtualKeydownHook:j,virtualHighlightHook:te,by:o.by,firstValue:R,selectionBehavior:_,focusable:G,onLeave:J,onEnter:ye,changeHighlight:b,onKeydownEnter:pe,onKeydownNavigation:ie,onKeydownTypeAhead:me,onCompositionStart:he,onCompositionEnd:ge,highlightFirstItem:ae}),(e,i)=>(w(),q(t(V),{ref_key:"primitiveElement",ref:P,as:e.as,"as-child":e.asChild,dir:t(M),"data-disabled":t(r)?"":void 0,onPointerleave:J,onFocusout:i[0]||(i[0]=async l=>{const f=l.relatedTarget||l.target;await H(),m.value&&t(v)&&!t(v).contains(f)&&J(l)})},{default:E(()=>[k(e.$slots,"default",{modelValue:t(p)}),t(fe)&&e.name?(w(),q(t(He),{key:0,name:e.name,value:t(p),disabled:t(r),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ye=Me,Re=K({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:u}=W(),a=Z(),o=Ee(!1,10);return(d,s)=>(w(),q(t(u),null,{default:E(()=>[ue(t(V),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=D(g=>o.value=!0,["left"])),onFocus:s[1]||(s[1]=g=>{t(o)||t(a).onEnter(g)}),onKeydown:[s[2]||(s[2]=T(D(g=>{t(a).focusable.value&&t(a).onKeydownNavigation(g)},["prevent"]),["down","up","left","right","home","end"])),T(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:E(()=>[k(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Ze=Re,$e=K({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:u}){const a=n,d=ne(a,"modelValue",u,{defaultValue:"",passive:a.modelValue===void 0}),s=Z(),{primitiveElement:g,currentElement:c}=oe(),r=$(()=>a.disabled||s.disabled.value||!1),_=C();return qe(()=>_.value=s.highlightedElement.value?.id),we(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&c.value?.focus()},1)}),Ie(()=>{s.focusable.value=!0}),(y,h)=>(w(),q(t(V),{ref_key:"primitiveElement",ref:g,as:y.as,"as-child":y.asChild,value:t(d),disabled:r.value?"":void 0,"data-disabled":r.value?"":void 0,"aria-disabled":r.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[T(D(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),T(t(s).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=B=>{d.value=B.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:E(()=>[k(y.$slots,"default",{modelValue:t(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),et=$e;const[tt,De]=Q("ListboxGroup");var Ge=K({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const u=n,a=de(void 0,"reka-listbox-group");return De({id:a}),(o,d)=>(w(),q(t(V),Y({role:"group"},u,{"aria-labelledby":t(a)}),{default:E(()=>[k(o.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),at=Ge;const Ne="listbox.select",[Oe,je]=Q("ListboxItem");var Ue=K({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:u}){const a=n,o=u,d=de(void 0,"reka-listbox-item"),{CollectionItem:s}=W(),{forwardRef:g,currentElement:c}=re(),r=Z(),_=$(()=>c.value===r.highlightedElement.value),y=$(()=>Te(r.modelValue.value,a.value,r.by)),h=$(()=>r.disabled.value||a.disabled);async function B(v){o("select",v),!v?.defaultPrevented&&!h.value&&v&&(r.onValueChange(a.value),r.changeHighlight(c.value))}function P(v){const x={originalEvent:v,value:a.value};Ke(Ne,B,x)}return je({isSelected:y}),(v,x)=>(w(),q(t(s),{value:v.value},{default:E(()=>[Le([_.value,y.value],()=>ue(t(V),Y({id:t(d)},v.$attrs,{ref:t(g),role:"option",tabindex:t(r).focusable.value?_.value?"0":"-1":-1,"aria-selected":y.value,as:v.as,"as-child":v.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":y.value?"checked":"unchecked",onClick:P,onKeydown:T(D(P,["prevent"]),["space"]),onPointermove:x[0]||(x[0]=M=>{t(r).highlightedElement.value!==t(c)&&(t(r).highlightOnHover.value?t(r).changeHighlight(t(c),!1):t(r).focusable.value||t(r).changeHighlight(t(c),!1))})}),{default:E(()=>[k(v.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),x,1)]),_:3},8,["value"]))}}),it=Ue,Je=K({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const u=n;re();const a=Oe();return(o,d)=>t(a).isSelected.value?(w(),q(t(V),Y({key:0,"aria-hidden":"true"},u),{default:E(()=>[k(o.$slots,"default")]),_:3},16)):se("v-if",!0)}}),lt=Je;export{Ye as L,Ze as a,at as b,et as c,it as d,lt as e,tt as f,Z as i};
