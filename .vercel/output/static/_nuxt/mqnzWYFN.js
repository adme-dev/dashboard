import{d as T,S as C,b as f,w as e,T as M,o as _,i as l,C as g,Q as N,f as o,M as t,J as a}from"./CTkq0g8j.js";import{_ as U,a as $}from"./BEHCJB9p.js";import{_ as w}from"./C5guC-ku.js";import{_ as L}from"./DTb3Reoh.js";import{_ as B}from"./BZ9R8plv.js";import"./DRjXbHxH.js";const S={key:0},z={key:1},D={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},E={class:"text-lg font-semibold"},F={class:"text-lg font-semibold"},R={class:"text-lg font-semibold"},j={class:"text-lg font-semibold"},A={class:"text-right block"},O={class:"text-right block"},V={class:"text-right block"},G={class:"text-right block"},I=T({__name:"consolidated",async setup(H){let d,m;const{data:r,pending:u,error:x,refresh:v}=([d,m]=C(()=>M("/api/xero/reports/pnl-consolidated","$jzinXjK6Wv")),d=await d,m(),d);function i(c){return typeof c!="number"||Number.isNaN(c)?"-":c.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}return(c,s)=>{const b=N,h=$,p=w,k=L,y=B,P=U;return _(),f(P,null,{default:e(()=>[l(h,{title:"Consolidated P&L",description:"Aggregated Profit & Loss across connected organizations"},{right:e(()=>[l(b,{label:"Refresh",color:"neutral",onClick:o(v)},null,8,["onClick"])]),_:1}),o(u)?(_(),g("div",S,"Loading consolidated P&Lâ€¦")):o(x)?(_(),g("div",z,"Failed to load consolidated P&L.")):(_(),f(y,{key:2,class:"gap-4 sm:gap-6"},{default:e(()=>[l(p,{title:"Totals",variant:"subtle"},{default:e(()=>[t("div",D,[t("div",null,[s[0]||(s[0]=t("div",{class:"text-muted text-xs"},"Revenue",-1)),t("div",E,a(i(o(r)?.totals?.revenueTotal)),1)]),t("div",null,[s[1]||(s[1]=t("div",{class:"text-muted text-xs"},"Expenses",-1)),t("div",F,a(i(o(r)?.totals?.expensesTotal)),1)]),t("div",null,[s[2]||(s[2]=t("div",{class:"text-muted text-xs"},"Net Profit",-1)),t("div",R,a(i(o(r)?.totals?.netProfit)),1)]),t("div",null,[s[3]||(s[3]=t("div",{class:"text-muted text-xs"},"Profit Margin",-1)),t("div",j,a(Math.round((o(r)?.totals?.profitMargin||0)*100))+"%",1)])])]),_:1}),l(p,{title:"Per Organization",variant:"subtle"},{default:e(()=>[l(k,{rows:o(r)?.tenants||[],columns:[{key:"tenantName",label:"Organization"},{key:"revenueTotal",label:"Revenue",class:"text-right"},{key:"expensesTotal",label:"Expenses",class:"text-right"},{key:"netProfit",label:"Net Profit",class:"text-right"},{key:"profitMargin",label:"Margin",class:"text-right"}]},{"revenueTotal-data":e(({row:n})=>[t("span",A,a(i(n.revenueTotal)),1)]),"expensesTotal-data":e(({row:n})=>[t("span",O,a(i(n.expensesTotal)),1)]),"netProfit-data":e(({row:n})=>[t("span",V,a(i(n.netProfit)),1)]),"profitMargin-data":e(({row:n})=>[t("span",G,a(Math.round((n.profitMargin||0)*100))+"%",1)]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1})}}});export{I as default};
